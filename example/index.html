<!doctype HTML>
<html>

<head>
  <script type="text/javascript" src="../lib/index.js"></script>
</head>

<body>
  <input type="text" id="whatsappid" placeholder="Exemplo: 5511973951769">
  <button onclick="startCall()">Call Start</button>
  <button onclick="endCall()">End Call</button>
  <button onclick="acceptCall()">Accept Call</button>
  <button onclick="rejectCall()">Reject Call</button>
  <button onclick="mute();">Mute Call</button>
  <button onclick="unMute();">Unmute Call</button>

  <script>
    const device = new Wavoip;
    const wavoipInstance = device.connect("AF34C92C-2381-4871-B790-14CE8437F645");
    

    window.wavoipInstance = wavoipInstance;
    wavoipInstance.socket.on('connect', () => {
      // console.log('Successfully connected!', wavoipInstance);

      // wavoipInstance.callStart({
      //   whatsappid: "5511973951769"
      // });
    });

    wavoipInstance.deviceEmitter.on('audio_audioctx_change_state', () => {
     alert("audio ctx")
    });

    wavoipInstance.deviceEmitter.on('microphone_audioctx_change_state', () => {
     alert("microphone ctx")
    });


    var startCall = () => {
      wavoipInstance.callStart({
        whatsappid: document.getElementById("whatsappid").value
      });
    }

    var endCall = () => {
      wavoipInstance.endCall();
    }

    var acceptCall = () => {
      wavoipInstance.acceptCall();
    }

    var rejectCall = () => {
      wavoipInstance.rejectCall();
    }

    var mute = () => {
      wavoipInstance.mute();
    }

    var unMute = () => {
      wavoipInstance.unMute();
    }
  </script>
</body>
</html>

(function(){"use strict";class h extends AudioWorkletProcessor{uint8=new Uint8Array(0);offset=0;constructor(s){super(s),this.port.onmessage=this.appendBuffers.bind(this)}async appendBuffers({data:{buffer:s}}){const e=new Uint8Array(this.uint8.length+s.length);return e.set(this.uint8,0),e.set(s,this.uint8.length),this.uint8=e,!0}process(s,e,c){const a=e[0];if(this.offset>=this.uint8.length)return!0;const o=new Uint8Array(256);for(let t=0;t<256&&!(this.offset>=this.uint8.length);t++,this.offset++)o[t]=this.uint8[this.offset];const n=new Uint16Array(o.buffer);let u=0;for(let t=0;t<n.length;t++){const i=n[t],r=i>=32768?-(65536-i)/32768:i/32767;a[0][t]=r,u+=r*r}const f=Math.sqrt(u/n.length);return this.port.postMessage({volume:f}),this.uint8.length-this.offset>25e3&&(this.offset+=1e4),!0}}registerProcessor("audio-data-worklet-stream",h)})();

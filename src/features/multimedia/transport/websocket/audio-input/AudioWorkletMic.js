(function(){"use strict";class a extends AudioWorkletProcessor{src=null;accumulated_PCM=[];constructor(e){super(e);const n=1,s=e.processorOptions?.sampleRate||48e3,t=16e3,{create:c,ConverterType:r}=globalThis.LibSampleRate;c(n,s,t,{converterType:r.SRC_SINC_BEST_QUALITY}).then(l=>{this.src=l})}process(e,n,s){if(!e.length||!e[0].length||!e[0][0])return!0;for(let t=0;t<e.length;t++){const c=e[t];for(let r=0;r<c.length;r++){const l=c[r];for(let o=0;o<l.length;o++)n[t][r][o]=l[o]}}if(this.src!==null){const t=this.src.full(e[0][0],null,null),c=this.convertToPCM(t);for(this.accumulated_PCM.push(...c);this.accumulated_PCM.length>=320;){const r=this.accumulated_PCM.splice(0,320);this.port.postMessage(new Int16Array(r).buffer)}}return!0}convertToPCM(e){const n=new Int16Array(e.length);for(let s=0;s<e.length;s++)n[s]=Math.max(-32768,Math.min(32767,Math.floor(e[s]*32767)));return n}}registerProcessor("resample-processor",a)})();
